/*---------------
* Tweetlight
* Display your latest tweets with pure JavaScript and PHP OAuth Library
* Example and documentation at: https://github.com/pinceladasdaweb/tweetlight
* Copyright (c) 2013
* Version: 3.0.0 (17-DEZ-2013)
* Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
* Requires: Twitter API Authentication
---------------*/
var Browser=function(){var a=navigator.userAgent;return{ie:a.match(/MSIE\s([^;]*)/)}}(),Tweetlight={init:function(a){this.url="./tweets.php?username="+a.username+"&count="+a.count,this.container=a.container,this.onComplete=a.onComplete||function(){},this.fetch()},xhr:function(){return new XMLHttpRequest},getJSON:function(a,b){var c=this,d=c.xhr();a.url=a.url||location.href,a.data=a.data||null,b=b||function(){},d.open("GET",a.url,!0),d.onreadystatechange=function(){200===d.status&&4===d.readyState&&b(d.responseText)},d.send(a.data)},loop:function(a,b){for(var c=0,d=a.length;d>c;)b(a[c],c),c+=1},fetch:function(){var a=this;a.getJSON({url:a.url},function(b){var c=JSON.parse(b),d=document.querySelector(a.container),e="";return c[0].created?(a.loop(c,function(b){e+='<li><span class="tweet">'+a.twitterLinks(b.text)+'</span><span class="created">'+a.prettyDate(b.created)+"</span></li>"}),d.innerHTML=e,a.onComplete(),void 0):(d.innerHTML='<li class="error">Houston, we have a problem...</li>',void 0)})},prettyDate:function(a){var b=new Date,c=new Date(a);Browser.ie&&(c=Date.parse(a.replace(/( \+)/," UTC$1")));var d=b-c,e=1e3,f=60*e,g=60*f,h=24*g;return isNaN(d)||0>d?"":7*e>d?"just now":f>d?Math.floor(d/e)+" seconds ago":2*f>d?"1 minute ago":g>d?Math.floor(d/f)+" minutes ago":2*g>d?"1 hour ago":h>d?Math.floor(d/g)+" hours ago":d>h&&2*h>d?"yesterday":365*h>d?Math.floor(d/h)+" days ago":"over a year ago"},twitterLinks:function(a){return a=a.replace(/(https?:\/\/)([\w\-:;?&=+.%#\/]+)/gi,'<a href="$1$2">$2</a>').replace(/(^|\W)@(\w+)/g,'$1<a href="https://twitter.com/$2">@$2</a>').replace(/(^|\W)#(\w+)/g,'$1<a href="https://twitter.com/search?q=%23$2">#$2</a>')}};