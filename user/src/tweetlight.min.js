/*---------------
* Tweetlight
* Display your latest tweets with pure JavaScript and PHP OAuth Library
* Example and documentation at: https://github.com/pinceladasdaweb/tweetlight
* Copyright (c) 2013
* Version: 2.0.0 (15-JUN-2013)
* Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
* Requires: Twitter API Authentication
---------------*/
var K=function(){var e=navigator.userAgent;return{ie:e.match(/MSIE\s([^;]*)/)}}();var Tweetlight={init:function(e){this.url="./tweets.php?username="+e.username+"&count="+e.count+"&api=statuses_userTimeline";this.container=e.container;this.onComplete=e.onComplete||function(){};this.fetch()},xhr:function(){var e=new XMLHttpRequest;return e},getJSON:function(e,t){var n=this.xhr();e.url=e.url||location.href;e.data=e.data||null;t=t||function(){};n.open("GET",e.url,true);n.send(e.data);n.onreadystatechange=function(){if(n.status==200&&n.readyState==4){t(n.responseText)}}},fetch:function(){var e=this;e.getJSON({url:this.url},function(t){var n=JSON.parse(t);var r=document.querySelector(e.container),i="";for(var s in n){i+='<li><span class="tweet">'+e.twitterLinks(n[s].text)+'</span> <span class="created">'+e.prettyDate(n[s].created)+"</span></li>"}r.innerHTML=i;e.onComplete()})},prettyDate:function(e){var t=new Date;var n=new Date(e);if(K.ie){n=Date.parse(e.replace(/( \+)/," UTC$1"))}var r=t-n;var i=1e3,s=i*60,o=s*60,u=o*24,a=u*7;if(isNaN(r)||r<0){return""}if(r<i*7){return"just now"}if(r<s){return Math.floor(r/i)+" seconds ago"}if(r<s*2){return"1 minute ago"}if(r<o){return Math.floor(r/s)+" minutes ago"}if(r<o*2){return"1 hour ago"}if(r<u){return Math.floor(r/o)+" hours ago"}if(r>u&&r<u*2){return"yesterday"}if(r<u*365){return Math.floor(r/u)+" days ago"}else{return"over a year ago"}},twitterLinks:function(e){e=e.replace(/(https?:\/\/)([\w\-:;?&=+.%#\/]+)/gi,'<a href="$1$2">$2</a>').replace(/(^|\W)@(\w+)/g,'$1<a href="https://twitter.com/$2">@$2</a>').replace(/(^|\W)#(\w+)/g,'$1<a href="https://twitter.com/search?q=%23$2">#$2</a>');return e}}